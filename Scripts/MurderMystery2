if game.PlaceId == 142823291 then
    wait(1)
    local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
    local Window = OrionLib:MakeWindow({Name = "MW Hub ⚔️ Murder Mystery 2", HidePremium = false, IntroEnabled = true, IntroText = "MW Hub", SaveConfig = false, IntroIcon = "rbxassetid://4335482118", ConfigFolder = "MW HUB"})

-- функция для определения цвета роли игрока
    local function getRoleColor(plr)
        if (plr.Backpack:FindFirstChild("Knife") or plr.Character:FindFirstChild("Knife")) then
            return Color3.new(255, 0, 0)
        elseif (plr.Backpack:FindFirstChild("Gun") or plr.Character:FindFirstChild("Gun")) then
            return Color3.new(0, 0, 255)
        else
            return Color3.new(255, 255, 0)
        end
    end

    -- функция для обновления подсветки роли игрока
    local function updateHighlights(plr)
        if plr.Character:FindFirstChild("Highlight") then
            plr.Character.Highlight.FillColor = getRoleColor(plr)
        end
    end

    -- функция для обновления подсветки всех игроков
    local function updateAllHighlights()
        for _, plr in ipairs(game.Players:GetChildren()) do
            updateHighlights(plr)
        end
    end

    local isHighlighting = false

    -- функция для создания и удаления подсветки
    local function highlightPlayers(enable)
        if enable then
            for _, v in ipairs(game.Players:GetChildren()) do
                if v ~= game.Players.LocalPlayer and v.Character then
                    if not v.Character:FindFirstChild("Highlight") then
                        Instance.new("Highlight", v.Character)
                        v.Character.Highlight.FillTransparency = 0.5
                        v.Character.Highlight.OutlineTransparency = 0.5
                        v.Character.Highlight.FillColor = getRoleColor(v)
                    else
                        v.Character.Highlight.FillColor = getRoleColor(v)
                    end

                    -- обновляет подсветку при добавлении или удалении предмета
                    v.Backpack.ChildAdded:Connect(function()
                        updateHighlights(v)
                    end)
                    v.Backpack.ChildRemoved:Connect(function()
                        updateHighlights(v)
                    end)
                end
            end
        else
            -- удаляет подсветку для всех игроков
            for _, v in ipairs(game.Players:GetChildren()) do
                if v ~= game.Players.LocalPlayer and v.Character and v.Character:FindFirstChild("Highlight") then
                    v.Character.Highlight:Destroy()
                end
            end
        end
    end

-- functions (esp.name)-- 

local function createESP(plr)
        local nameTag = Instance.new("BillboardGui", plr.Character)
        nameTag.Name = "ESPTag"
        nameTag.Size = UDim2.new(4, 0, 1.25, 0)
        nameTag.StudsOffset = Vector3.new(0, 3, 0)
        nameTag.Adornee = plr.Character.Head
        nameTag.AlwaysOnTop = true

        local nameTagText = Instance.new("TextLabel", nameTag)
        nameTagText.Name = "ESPTagText"
        nameTagText.Size = UDim2.new(1, 0, 1, 0)
        nameTagText.Text = plr.Name
        nameTagText.Font = Enum.Font.Code
        nameTagText.TextSize = 16
        nameTagText.BackgroundTransparency = 1
        nameTagText.TextColor3 = Color3.new(1, 0, 0)
        nameTagText.BorderSizePixel = 0
        end

    local function updateESP()
        for _, plr in pairs(game.Players:GetChildren()) do
            if plr ~= game.Players.LocalPlayer and plr.Character and plr.Character:FindFirstChild("Head") then
                local ESPTag = plr.Character:FindFirstChild("ESPTag")
                if not ESPTag then
                    createESP(plr)
                end
            end
        end
    end

    local function removeESP()
        for _, plr in pairs(game.Players:GetChildren()) do
            if plr.Character and plr.Character:FindFirstChild("ESPTag") then
                plr.Character.ESPTag:Destroy()
            end
        end
    end

    local isESPEnabled = false

 -- take gun

 local function WaitForGunDrop()
    while true do
        local gunDrop = workspace:FindFirstChild("GunDrop")
        if gunDrop then
            return gunDrop
        end
        wait(0.1)
    end
end

-- tab --
local EspTab = Window:MakeTab({
	Name = "Esp",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local PlayerTab = Window:MakeTab({
	Name = "Player",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local TeleportTab = Window:MakeTab({
	Name = "Teleport",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local CombatTab = Window:MakeTab({
	Name = "Combat",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local MiscTab = Window:MakeTab({
	Name = "Misc",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

-- take gun

local function createTeleportButton()
    MiscTab:AddButton({
        Name = "Teleport to Gun. (only dropped)",
        Callback = function()
            local player = game.Players.LocalPlayer
            local char = player.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                local initialPosition = char.HumanoidRootPart.CFrame

                local gunDrop = WaitForGunDrop()
                wait(0.6)
                -- Исходный телепорт
                char.HumanoidRootPart.CFrame = gunDrop.CFrame

                wait(0.6)
                -- Возвращение на исходную позицию
                char.HumanoidRootPart.CFrame = initialPosition
            end
        end
    })
end

-- inf.jump

game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed) 
    if not gameProcessed and input.KeyCode == Enum.KeyCode.Space and isInfinityJumpEnabled then 
        game.Players.LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping) 
    end 
end) 

-- Ctrl Delete Toggle
local ctrlDeleteEnabled = false

local UserInputService = game:GetService("UserInputService")

local function onMouseButtonDown()
    if not ctrlDeleteEnabled then return end
    if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or UserInputService:IsKeyDown(Enum.KeyCode.RightControl) then
        local player = game.Players.LocalPlayer
        local mouse = player:GetMouse()
        local target = mouse.Target
        if target then
            target:Destroy()
        end
    end
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        onMouseButtonDown()
    end
end)

-- button -- 

TeleportTab:AddButton({
	Name = "TP TO SPAWN",
	Callback = function()
        local targetObject = game:GetService("Workspace").Lobby.Map.Barrel["Meshes/Barrel_Metal"]
    if targetObject then
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        character:MoveTo(targetObject.Position)
    end
end
})

-- label --

CombatTab:AddLabel("Coming soon!")

-- toggle -- 

    local ESPButton = EspTab:AddToggle({
        Name = "Name ESP",
        Default = false,
        Callback = function(value)
            isESPEnabled = value
            if isESPEnabled then
                updateESP()
                game.Players.PlayerAdded:Connect(function(plr)
                    plr.CharacterAdded:Connect(function(character)
                        if isESPEnabled then
                            createESP(plr)
                        end
                    end)
                end)
            else
                removeESP()
            end
        end
    })

    -- добавление переключателя для подсветки на вкладке "Esp"
    EspTab:AddToggle({
        Name = "Player Esp",
        Default = false,
        Callback = function(value)
            isHighlighting = value
            highlightPlayers(isHighlighting)
            updateAllHighlights()
            if isHighlighting then
                -- обрабатывает добавление новых игроков и обновляет подсветку
                game.Players.PlayerAdded:Connect(function(plr)
                    plr.CharacterAdded:Connect(function(character)
                        if isHighlighting then
                            highlightPlayers(true)
                            updateAllHighlights()
                        end
                    end)
                    plr.Backpack.ChildAdded:Connect(function()
                        if isHighlighting then
                            updateHighlights(plr)
                        end
                    end)
                    plr.Backpack.ChildRemoved:Connect(function()
                        if isHighlighting then
                            updateHighlights(plr)
                        end
                    end)
                end)
            else
                -- обрабатывает добавление новых игроков и удаление подсветки
                game.Players.PlayerAdded:Connect(function(plr)
                    plr.CharacterAdded:Connect(function(character)
                        if not isHighlighting then
                            highlightPlayers(false)
                            updateAllHighlights()
                        end
                    end)
                end)
            end
        end
    })

EspTab:AddBind({
    Name = "Fix Esp (bind)",
    Default = Enum.KeyCode.C,
    Hold = false,
    Callback = function()
        if isHighlighting == true then
            print("MeoW Hub: Succefully ESP updated.")
            highlightPlayers(true)
            updateAllHighlights()
            wait(0.5)
        elseif isHighlighting == false then
            print("MeoW Hub: Succefully ESP updated.")
            wait(0.5)
        else
            print("MeoW Hub: Error.")
        end
    end    
})

-- toggles

PlayerTab:AddToggle({
    Name = "Infinity Jump",
    Default = false,
    Callback = function(value) isInfinityJumpEnabled = value
    end
})

MiscTab:AddToggle({
    Name = "Ctrl + Click Delete",
    Default = false,
    Callback = function(value) ctrlDeleteEnabled = value end
})

-- slider (walkspeed)

PlayerTab:AddSlider({
    Name = "Walkspeed",
    Min = 16,
    Max = 50,
    Default = 16,
    Color = Color3.fromRGB(255,189,211),
    Increment = 1,
    ValueName = "speed",
    Callback = function(value)
        WalkspeedSteps = value
        local Players = game.Players
        local function onCharacterAdded(character)
            local humanoid = character:WaitForChild("Humanoid")
            humanoid.WalkSpeed = WalkspeedSteps
        end
        
        local function onPlayerAdded(player)
            player.CharacterAdded:Connect(onCharacterAdded)
            if player.Character then
                onCharacterAdded(player.Character)
            end
        end

        Players.PlayerAdded:Connect(onPlayerAdded)
        for _, player in ipairs(Players:GetPlayers()) do
            onPlayerAdded(player)
        end
    end    
})

createTeleportButton()

OrionLib:Init()
end
